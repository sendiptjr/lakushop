(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{6132:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/transaction/detail",function(){return e(9115)}])},9115:function(t,n,e){"use strict";e.r(n);var i=e(4051),o=e.n(i),a=e(5893),l=e(7294),r=e(1163),s=e(1659),d=e(9474),c=e(1043),u=e(983),v=e(381),m=e.n(v),f=e(9460),h=e(1578),y=e(1502);function p(t,n,e,i,o,a,l){try{var r=t[a](l),s=r.value}catch(d){return void e(d)}r.done?n(s):Promise.resolve(s).then(i,o)}function x(t){return function(){var n=this,e=arguments;return new Promise((function(i,o){var a=t.apply(n,e);function l(t){p(a,i,o,l,r,"next",t)}function r(t){p(a,i,o,l,r,"throw",t)}l(void 0)}))}}function _(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}n.default=function(){var t,n,e,i=(0,c.I0)(),v=(0,r.useRouter)(),p=(0,l.useState)(),g=p[0],b=p[1],j=(0,c.v9)((function(t){return t.user})).user,w=(0,l.useState)({}),S=w[0],k=w[1];(0,l.useEffect)((function(){var t;if(null===v||void 0===v||null===(t=v.query)||void 0===t?void 0:t.code){(0,f.FB)("page_view_transaction_detail",null===j||void 0===j?void 0:j.first_name,null===j||void 0===j?void 0:j.email);var n=function(){var t=x(o().mark((function t(){var n,e,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,u.Z.get("transaction/api/trx/detail/".concat(null===v||void 0===v||null===(n=v.query)||void 0===n?void 0:n.code));case 4:i=t.sent,b(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),null===v||void 0===v||v.push("/");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();n()}}),[null===v||void 0===v||null===(t=v.query)||void 0===t?void 0:t.code]),(0,l.useEffect)((function(){if(null===localStorage.getItem(null===g||void 0===g?void 0:g.code)&&(localStorage.setItem(null===g||void 0===g?void 0:g.code,null===g||void 0===g?void 0:g.code),"1"===(null===g||void 0===g?void 0:g.payment_status))){var t={transaction_id:null===g||void 0===g?void 0:g.code,currency:"IDR",value:null===g||void 0===g?void 0:g.total_payment,items:null===g||void 0===g?void 0:g.transaction_detail_list};(0,f.sv)("purchase",t)}}),[g]);var M,N=function(t){k((function(n){return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),i.forEach((function(n){_(t,n,e[n])}))}return t}({},n,_({},t,!n[t]))}))},B=function(t,n){return S[n],t},F=function(){var t=x(o().mark((function t(){var n,e,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={transaction_code:null===g||void 0===g?void 0:g.code},(0,f.FB)("success_reorder",null===j||void 0===j?void 0:j.first_name,null===j||void 0===j?void 0:j.email),t.next=6,u.Z.post("transaction/api/trx/reorder",e);case 6:return t.next=8,u.Z.get("transaction/api/cart/total_item");case 8:a=t.sent,i((0,y.no)(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data)),null===v||void 0===v||v.push("/cart"),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),C=window.innerWidth<=800,D=function(t){var n=t;return m()(n).format("YYYY-MM-DD HH:mm")};return(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(d.Z,{}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[(0,a.jsxs)("div",{onClick:function(){return v.push("/transaction")},style:{display:"flex",flex:1,flexDirection:"row",alignItems:"center",margin:20},children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:"35",height:"35",children:(0,a.jsx)("path",{d:"M19,11H9l3.29-3.29a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0l-4.29,4.3A2,2,0,0,0,6,12H6a2,2,0,0,0,.59,1.4l4.29,4.3a1,1,0,1,0,1.41-1.42L9,13H19a1,1,0,0,0,0-2Z"})}),(0,a.jsx)("div",{style:{fontSize:18,fontFamily:"Montserrat-Semibold"},children:"Transaksi"})]}),(0,a.jsx)("div",{style:{overflowY:C?"auto":"hidden"},children:(0,a.jsxs)("div",{className:"cardTransaction",children:[(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[(0,a.jsxs)("h1",{className:"transaction_status",style:{color:"1"===(null===g||void 0===g?void 0:g.payment_status)?"#5ACC4D":"0"===(null===g||void 0===g?void 0:g.payment_status)?"#E0BF4B":"red",fontFamily:"Montserrat-Semibold"},children:[(M=null===g||void 0===g?void 0:g.payment_status,"0"===M?"Menunggu Pembayaran":"1"===M?"Transaksi Selesai":"2"===M?"Transaksi Dibatalkan":"Menunggu Pembayaran"),"-"]})," ",(0,a.jsx)("h1",{className:"transaction_status",style:{color:"#E0BF4B",fontFamily:"Montserrat-Semibold"},children:null===g||void 0===g?void 0:g.code})]}),(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex",marginTop:10},children:[(0,a.jsx)("h1",{className:"transaction_status",style:{flex:1,fontFamily:"Montserrat-Semibold"},children:"Tanggal Transaksi"}),(0,a.jsxs)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold"},children:[D(null===g||void 0===g?void 0:g.order_date)," ","WIB"]})]}),(0,a.jsxs)("div",{style:{flexDirection:"row",flexWrap:"wrap",display:"flex",marginTop:10},children:[(0,a.jsx)("h1",{className:"transaction_status",style:{flex:1,fontFamily:"Montserrat-Semibold"},children:"Dikirim ke"}),(0,a.jsx)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold",marginLeft:0,fontStyle:"italic",textDecoration:"underline",color:"#149cff"},children:null===j||void 0===j?void 0:j.email})]}),"1"===(null===g||void 0===g?void 0:g.payment_status)&&(null===(n=null===g||void 0===g?void 0:g.transaction_detail_list[0].CampaignVouchers)||void 0===n?void 0:n.length)>0?(0,a.jsxs)("div",{style:{flexDirection:"row",flexWrap:"wrap",display:"flex",marginTop:10},children:[(0,a.jsx)("h1",{className:"transaction_status",style:{flex:1,fontFamily:"Montserrat-Semibold"},children:"Masa Aktif Hingga"}),(0,a.jsxs)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold",marginLeft:0,color:"black"},children:[D(null===g||void 0===g?void 0:g.voucher_valid_until)," WIB"]})]}):null,(0,a.jsx)("div",{style:{borderBottomWidth:1,borderBottomColor:"#f1f1f1",marginTop:20,marginBottom:20,borderStyle:"solid"}}),(0,a.jsx)("h1",{className:"transaction_status",style:{flex:1,fontFamily:"Montserrat-Semibold"},children:"Detail Barang"}),null===g||void 0===g||null===(e=g.transaction_detail_list)||void 0===e?void 0:e.map((function(t){var n,e,i,o;return(0,a.jsxs)("div",{className:"cart-product",children:[(0,a.jsx)("div",{className:"transaction-product__img_cart",children:(0,a.jsx)("img",{src:"https://lakuemasdev.oss-ap-southeast-5.aliyuncs.com/ecommerce/product/"+(null===t||void 0===t?void 0:t.payment_img),alt:"img-detail"})}),(0,a.jsxs)("div",{className:"cart-product__content",children:[(0,a.jsx)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold"},children:null===t||void 0===t?void 0:t.product_name}),(0,a.jsxs)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold"},children:[null===t||void 0===t?void 0:t.qty," Qty"]}),(0,a.jsxs)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold"},children:["Total Price Rp. ",(0,f.OH)(t.total_price)]}),(null===(n=t.CampaignVouchers)||void 0===n?void 0:n.valid_until)&&"0"!=(null===g||void 0===g?void 0:g.payment_status)?(0,a.jsxs)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold"},children:["Rp. ",(0,f.OH)(t.price)," - Exp."," ",(null===(e=t.CampaignVouchers)||void 0===e?void 0:e.valid_until)&&"0"!=(null===g||void 0===g?void 0:g.payment_status)?m()(null===(i=t.CampaignVouchers)||void 0===i?void 0:i.valid_until).format("DD MMMM YYYY"):""]}):(0,a.jsxs)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold"},children:["@ Rp. ",(0,f.OH)(t.price)]}),(0,a.jsx)("div",{style:{borderBottomWidth:1,borderBottomColor:"#E0BF4B",marginTop:20,borderStyle:"solid"}}),"0"!=(null===g||void 0===g?void 0:g.payment_status)?null===t||void 0===t||null===(o=t.CampaignVouchers)||void 0===o?void 0:o.map((function(t){return(0,a.jsxs)("div",{style:{borderWidth:1,borderColor:"#f1f1f1",marginTop:20,marginBottom:20,borderStyle:"solid",padding:20,borderRadius:20},children:[(0,a.jsx)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold",color:"0"===(null===t||void 0===t?void 0:t.voucher_status)?"#00AA13":"1"===t.voucher_status?"#E0BF4B":"red"},children:"0"===(null===t||void 0===t?void 0:t.voucher_status)?"Voucher Belum Terpakai":"1"===t.voucher_status?"Voucher Terpakai":"Voucher Expired"}),(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[(0,a.jsx)("h3",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold",marginRight:5},children:B(t.voucher_code,t.voucher_code)}),(0,a.jsx)(h.Z,{isVisible:S[t.voucher_code],toggleVisibility:function(){return N(t.voucher_code)}})]}),S[t.voucher_code]?(0,a.jsx)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold",marginLeft:0,fontStyle:"italic",textDecoration:"underline",color:"#149cff"},children:"Cek Kode Voucher yang dikirim ke email anda"}):null]})})):null,"0"!=(null===g||void 0===g?void 0:g.payment_status)&&"2"!=(null===g||void 0===g?void 0:g.payment_status)&&null===(null===t||void 0===t?void 0:t.CampaignVouchers)?(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"transaction_status",style:{fontFamily:"Montserrat-Semibold",color:"gray",marginTop:20},children:"Sedang proses generate voucher . . ."})}):null]})]})})),(0,a.jsx)("div",{style:{borderBottomWidth:1,borderBottomColor:"#f1f1f1",marginTop:20,marginBottom:20,borderStyle:"solid"}}),(0,a.jsxs)("div",{className:"flexResponsive",children:["0"===(null===g||void 0===g?void 0:g.payment_status)?(0,a.jsx)("button",{onClick:function(){window.open(null===g||void 0===g?void 0:g.payment_url,"_blank"),(0,f.FB)("click_payment",null===j||void 0===j?void 0:j.first_name,null===j||void 0===j?void 0:j.email)},style:{backgroundColor:"#E0BF4B",padding:15,paddingInline:30,borderRadius:20,minWidth:200,margin:10},children:(0,a.jsx)("h1",{className:"transaction_status",style:{color:"white",fontFamily:"Montserrat-Semibold"},children:"Bayar Sekarang"})}):null,(0,a.jsx)("button",{onClick:function(){F()},style:{backgroundColor:"#04AA87",padding:15,paddingInline:30,borderRadius:20,minWidth:200},children:(0,a.jsx)("h1",{className:"transaction_status",style:{color:"white",fontFamily:"Montserrat-Semibold"},children:"Beli kembali"})})]})]})})]})]})}}},function(t){t.O(0,[937,296,57,885,632,970,98,694,474,774,888,179],(function(){return n=6132,t(t.s=n);var n}));var n=t.O();_N_E=n}]);