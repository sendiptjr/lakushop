(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{1742:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return e(9890)}])},6322:function(t,n,e){"use strict";var r=e(5893);n.Z=function(t){var n=t.step;return(0,r.jsx)("div",{className:"checkout-status",children:(0,r.jsxs)("ul",{className:"checkout-steps",children:[(0,r.jsx)("li",{className:"".concat("cart"===n?"active":"done"),children:(0,r.jsx)("i",{className:"icon-cart"})}),(0,r.jsx)("li",{className:"".concat("checkout"===n?"active":"done"),children:(0,r.jsx)("i",{className:"icon-delivery"})})]})})}},9890:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return F}});var r=e(5893),i=e(1659),a=e(4051),o=e.n(a),c=e(1043),s=e(6322),l=e(9460),u=function(t){var n,e,i,a=t.item,o=t.setProductCount,c=t.removeFromCart;return(0,r.jsxs)("div",{className:"cart-product",children:[(0,r.jsx)("img",{alt:"img-item",width:80,height:80,src:"https://lakuemasdev.oss-ap-southeast-5.aliyuncs.com/ecommerce/product/"+(null===a||void 0===a||null===(n=a.Product)||void 0===n?void 0:n.img_thumbnail),style:{marginRight:20,borderRadius:"50%"}}),(0,r.jsxs)("div",{className:"cart-product__content",children:[(0,r.jsx)("h3",{style:{fontFamily:"Montserrat-Semibold"},children:null===a||void 0===a||null===(e=a.Product)||void 0===e?void 0:e.name}),(0,r.jsxs)("p",{className:"cart-product__price",style:{fontFamily:"Montserrat-Semibold"},children:[" ","Rp. ",(0,l.OH)(null===a||void 0===a||null===(i=a.Product)||void 0===i?void 0:i.current_price)]})]}),(0,r.jsxs)("div",{className:"quantity-button",style:{marginLeft:5,marginRight:5},children:[(0,r.jsx)("button",{type:"button",style:{marginLeft:5,fontSize:16,marginRight:5,color:"black"},onClick:function(){return o((null===a||void 0===a?void 0:a.qty)-1,null===a||void 0===a?void 0:a.product_id)},className:"quantity-button__btn",children:"-"}),(0,r.jsx)("span",{style:{fontFamily:"Montserrat-Semibold"},children:null===a||void 0===a?void 0:a.qty}),(0,r.jsx)("button",{type:"button",style:{marginLeft:5,fontSize:16,marginRight:5,color:"black"},onClick:function(){return o((null===a||void 0===a?void 0:a.qty)+1,null===a||void 0===a?void 0:a.product_id)},className:"quantity-button__btn",children:"+"})]}),(0,r.jsx)("div",{className:"cart-product__cancel",style:{marginLeft:20},children:(0,r.jsx)("i",{className:"icon-cancel",onClick:function(){return c(a)}})})]})},d=e(1664),v=e.n(d),f=e(7294),m=e(983),p=e(4912),h=e(1163),x=e(1502),y=e(1369),b=e(3954),j=e(4591),g=e(6653);function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function k(t,n,e,r,i,a,o){try{var c=t[a](o),s=c.value}catch(l){return void e(l)}c.done?n(s):Promise.resolve(s).then(r,i)}function N(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){k(a,r,i,o,c,"next",t)}function c(t){k(a,r,i,o,c,"throw",t)}o(void 0)}))}}function w(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(){var t=(0,c.I0)(),n=(0,h.useRouter)(),e=(0,f.useState)([]),i=e[0],a=e[1],d=(0,f.useState)(0),_=d[0],k=d[1],S=(0,f.useState)(!1),C=S[0],F=S[1],E=(0,f.useState)(""),A=E[0],B=E[1],P=(0,f.useState)(!1),R=P[0],Z=P[1],q=(0,c.v9)((function(t){return t.user})).user,M=function(){var e=N(o().mark((function e(){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,m.Z.get("transaction/api/cart");case 4:i=e.sent,a(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.data),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),localStorage.removeItem("token"),t((0,p.vH)(null)),n.push("/");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){M(),(0,l.FB)("page_view_checkout",null===q||void 0===q?void 0:q.first_name,null===q||void 0===q?void 0:q.email)}),[]),(0,f.useEffect)((function(){I()}),[i]);var I=function(){var t=0;i.forEach((function(n){var e;t+=(null===n||void 0===n?void 0:n.qty)*(null===n||void 0===n||null===(e=n.Product)||void 0===e?void 0:e.current_price)})),k(t)},O=function(){var e=N(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.post("transaction/api/cart/update_item",r);case 3:e.sent&&M(),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),localStorage.removeItem("token"),t((0,p.vH)(null)),n.push("/");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=N(o().mark((function e(r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("transaction/api/cart/remove_item/".concat(r));case 3:if(!e.sent){e.next=11;break}return M(),e.next=9,m.Z.get("transaction/api/cart/total_item");case 9:a=e.sent,t((0,x.no)(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.data));case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),localStorage.removeItem("token"),t((0,p.vH)(null)),n.push("/");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var t=N(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(n);case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),H=function(){var e=N(o().mark((function e(){var r,i,a,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,m.Z.post("transaction/api/trx/checkout");case 4:(r=e.sent)&&(B(""),(0,l.FB)("Success_Checkout",null===q||void 0===q?void 0:q.first_name,null===q||void 0===q?void 0:q.email),t((0,y._R)(null===r||void 0===r?void 0:r.data)),t((0,x.no)(0)),F(!1),n.push({pathname:"/transaction/detail",query:{code:null===r||void 0===r||null===(i=r.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.code}})),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),F(!1),Z(!0),B(null===e.t0||void 0===e.t0||null===(c=e.t0.res)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.error);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),L=window.innerWidth>800;return(0,r.jsxs)("section",{className:"cart",children:[(0,r.jsx)(j.Z,{isOpen:R,onClose:function(){return Z(!1)},children:(0,r.jsxs)("div",{className:"flex items-center flex-col",children:[(0,r.jsx)(g.hQB,{size:50,color:"#E0BF4B"}),(0,r.jsx)("h1",{className:"my-4 mx-4 text-center",children:A||"Telah terjadi kesalahan, Silahkan mencoba beberapa saat lagi."}),(0,r.jsx)("div",{onClick:function(){return Z(!1)},className:" cursor-pointer btn bg-[#E0BF4B] p-2 rounded-md",children:(0,r.jsx)("h1",{children:"OK"})})]})}),(0,r.jsxs)("div",{className:"container-product",children:[(0,r.jsxs)("div",{className:"cart__intro",children:[(0,r.jsx)(v(),{href:"/products",children:(0,r.jsxs)("a",{style:{fontFamily:"Montserrat-Semibold"},className:"cart__btn-back",children:[(0,r.jsx)("i",{className:"icon-left",style:{fontFamily:"Montserrat-Semibold"}})," ","Back"]})}),(0,r.jsx)(s.Z,{step:"cart"})]}),(0,r.jsxs)("div",{className:"cart-list",style:{flexDirection:"column",display:"flex",alignItems:"flex-start",justifyContent:"flex-start"},children:[i.length>0&&function(){var t=i;return(0,r.jsx)("div",{style:{overflowY:"auto",display:"flex",flexDirection:"column"},children:t&&t.map((function(t,n){return(0,r.jsx)(u,{item:t,setProductCount:function(t,e){0===t||function(t,n,e){if(n>=0&&n<i.length&&t>=0){var r=w(i);r[n].qty=t,a(r),O({product_id:e,qty:t})}}(t,n,e)},removeFromCart:function(t){return z(null===t||void 0===t?void 0:t.product_id)}},n)}))})}(),0===i.length&&(0,r.jsx)("p",{style:{fontFamily:"Montserrat-Semibold"},children:"Belum ada produk dikeranjang"})]}),(0,r.jsx)("div",{className:"cart-actions",children:(0,r.jsxs)("div",{className:"cart-actions__items-wrapper",style:{flexDirection:L?"row":"column"},children:[(0,r.jsxs)("p",{className:"cart-actions__total",style:{fontFamily:"Montserrat-Semibold",alignItems:"center",display:"flex",marginRight:0},children:["Total cost ",(0,r.jsxs)("strong",{children:["Rp. ",(0,l.OH)(_)]})]}),(0,r.jsxs)("div",{style:{marginTop:10},children:[(0,r.jsx)("div",{onClick:function(){n.push("/products")},className:"btn btn--rounded ",style:{backgroundColor:"#E0BF4B",cursor:"pointer",borderRadius:25,padding:10,maxWidth:200},children:(0,r.jsx)("h1",{style:{color:"white",textAlign:"center",fontFamily:"Montserrat-Semibold",fontSize:L?14:10},children:"Add Product"})}),(0,r.jsx)("button",{disabled:!(0!==i.length&&!C),onClick:function(){return H()},children:(0,r.jsx)("a",{className:"btn btn--rounded ",style:{backgroundColor:"#04AA87",fontFamily:"Montserrat-Semibold",opacity:0===i.length?.5:1,color:"white",padding:10,fontSize:L?14:10},children:C?(0,r.jsx)(b.Z,{loading:C}):"Checkout"})})]})]})})]})]})},C=e(9474),F=function(){return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(C.Z,{}),(0,r.jsx)(S,{})]})}}},function(t){t.O(0,[937,296,57,777,632,970,98,694,474,774,888,179],(function(){return n=1742,t(t.s=n);var n}));var n=t.O();_N_E=n}]);